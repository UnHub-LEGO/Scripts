local plr = game.Players.LocalPlayer
if workspace.Environment.Interactables.Store:FindFirstChild("Part") then
local prompt = workspace.Environment.Interactables.Store.Part.ProximityPrompt
local PartCFrame = plr.Character.HumanoidRootPart.CFrame

plr.Character.HumanoidRootPart.CFrame = workspace.Environment.Interactables.Store.Part.CFrame
prompt.HoldDuration = 0
task.wait(0.5)
prompt:InputHoldBegin(plr)
task.wait()
prompt:InputHoldEnd(plr)
task.wait(0.1)
prompt:InputHoldBegin(plr)
task.wait()
prompt:InputHoldEnd(plr)
task.wait()
plr.Character.HumanoidRootPart.CFrame = PartCFrame
end

local Rayfield = loadstring(game:HttpGet('https://raw.githubusercontent.com/UnHub-LEGO/Scripts/refs/heads/main/Rayfield%20Library'))()

local Window = Rayfield:CreateWindow({
   Name = "UnHub | by LE_GO89",
   FileName = "UnHub",
   Icon = 0,
   LoadingTitle = "UnHub",
   LoadingSubtitle = "by LE_GO89",
   Theme = "Default",
   ToggleUIKeybind = "H",
   ConfigurationSaving = {
      Enabled = true,
      FolderName = "Hatch A Pet",
      FileName = "data"
   },
   Discord = {
      Enabled = false,
      Invite = "",
      RememberJoins = true
   },
   KeySystem = false,
   KeySettings = {
      Title = "UnHub",
      Subtitle = "Key",
      Note = "Get the key by visit the website and wait 5 sec copy the key",
      FileName = "Key",
      SaveKey = false,
      GrabKeyFromSite = false,
      Key = {"Hi"}
    }
})

local RunService = game:GetService("RunService")
local HttpService = game:GetService("HttpService")
local TeleportService = game:GetService("TeleportService")
local VIM = game:GetService("VirtualInputManager")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local Players = game:GetService("Players")
local UIS = game:GetService("UserInputService")
local RS = game:GetService("RunService")
local cam = workspace.CurrentCamera
local freecamEnabled = false
local keysDown = {}
local rotating = false
local touchPos = nil
local speed = 5
local UtilsModule = require(game.Players.LocalPlayer.PlayerGui.Scripts.UtilsModule)
local Players = game.Players
local AllSave = {}
local IsGettingQuest = false
local AutoRoll, AutoSellMount, AutoCollectLoot, HideSkill, AutoFarm, AutoAttack, SelectAllMob, AutoGetQuestReward, AutoGetQuest = false, false, false, false, false, false, false, false, false
local ST = Instance.new("ScreenGui")
local T = Instance.new("ImageButton")
local Corner = Instance.new("UICorner")
local Backpack = plr.Backpack
ST.Name = "Toggle UnHub"
ST.Parent = Rayfield:GetParent().Parent
ST.ResetOnSpawn = false
Corner.Name = "Corner"
Corner.Parent = T
T.Name = "T"
T.Parent = ST
T.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
T.Position = UDim2.new(0, 30, 0.08, 0)
T.Size = UDim2.new(0, 50, 0, 50)
T.Image = "rbxthumb://type=GameThumbnail&id="..game.PlaceId.."&w=256&h=144"
T.Active = true
T.Draggable = true
T.MouseButton1Click:connect(function()
    Rayfield:SetEnable(not Rayfield:GetEnable())
end)

local SelectTier = {"Common"}
local SelectItem = {}
local SelectMob = {}
local RarityNum = 1
local KeepAmount = 1
local BuyAmountPerItemNum = 1
local ShopItem = {}
local ShopList = {}
local TweenSpeed = 400
local Mobs = {"Miner", "Lumberjack", "Oger", "Pirate", "Snow Guardian", "Fire Knight", "Celestial Knight", "Banished Knight", "Bandit", "Archer"}

local function NumberCoverter(str)
    return tonumber((str:gsub("%D", "")))
end

for i, v in pairs(plr.PlayerGui.Shop.Window.Grid.ScrollingFrame:GetChildren()) do
    if v:IsA("Frame") then
        table.insert(ShopItem, {v.Frame.Button.ItemName.Text, v})
    end
end

for i, v in pairs(ShopItem) do
    table.insert(ShopList, v[1])
end

local function activateFreecam()
   local plr = game.Players.LocalPlayer
   local hum = plr.Character.HumanoidRootPart
	local onMobile = not UIS.KeyboardEnabled
	cam.CameraType = Enum.CameraType.Scriptable
	local sens = 0.3
	if onMobile then sens *= 2 end
	keysDown = {}
	rotating = false
	local function renderStepped()
		if not freecamEnabled then return end
		if rotating then
			local delta = UIS:GetMouseDelta()
			local cf = cam.CFrame
			local yAngle = cf:ToEulerAngles(Enum.RotationOrder.YZX)
			local newAmount = math.deg(yAngle) + delta.Y
			if newAmount > 65 or newAmount < -65 then
				if not (yAngle < 0 and delta.Y < 0) and not (yAngle > 0 and delta.Y > 0) then
					delta = Vector2.new(delta.X, 0)
				end
			end
			cf *= CFrame.Angles(-math.rad(delta.Y), 0, 0)
			cf = CFrame.Angles(0, -math.rad(delta.X), 0) * (cf - cf.Position) + cf.Position
			cf = CFrame.lookAt(cf.Position, cf.Position + cf.LookVector)
			if delta ~= Vector2.new(0, 0) then
				cam.CFrame = cam.CFrame:Lerp(cf, sens)
			end
			UIS.MouseBehavior = Enum.MouseBehavior.LockCurrentPosition
		else
			UIS.MouseBehavior = Enum.MouseBehavior.Default
		end
		if keysDown["Enum.KeyCode.W"] then
			cam.CFrame *= CFrame.new(Vector3.new(0, 0, -speed))
		end
		if keysDown["Enum.KeyCode.A"] then
			cam.CFrame *= CFrame.new(Vector3.new(-speed, 0, 0))
		end
		if keysDown["Enum.KeyCode.S"] then
			cam.CFrame *= CFrame.new(Vector3.new(0, 0, speed))
		end
		if keysDown["Enum.KeyCode.D"] then
			cam.CFrame *= CFrame.new(Vector3.new(speed, 0, 0))
		end
	end
	RS:BindToRenderStep("FreecamRender", Enum.RenderPriority.Camera.Value, renderStepped)
	local validKeys = {"Enum.KeyCode.W", "Enum.KeyCode.A", "Enum.KeyCode.S", "Enum.KeyCode.D"}
	UIS.InputBegan:Connect(function(Input)
		for i, key in pairs(validKeys) do
			if key == tostring(Input.KeyCode) then
				keysDown[key] = true
			end
		end
		if Input.UserInputType == Enum.UserInputType.MouseButton2 or (Input.UserInputType == Enum.UserInputType.Touch and UIS:GetMouseLocation().X > (cam.ViewportSize.X / 2)) then
			rotating = true
		end
		if Input.UserInputType == Enum.UserInputType.Touch then
			if Input.Position.X < cam.ViewportSize.X / 2 then
				touchPos = Input.Position
			end
		end
	end)
	UIS.InputEnded:Connect(function(Input)
		for key, _ in pairs(keysDown) do
			if key == tostring(Input.KeyCode) then
				keysDown[key] = false
			end
		end
		if Input.UserInputType == Enum.UserInputType.MouseButton2 or (Input.UserInputType == Enum.UserInputType.Touch and UIS:GetMouseLocation().X > (cam.ViewportSize.X / 2)) then
			rotating = false
		end
		if Input.UserInputType == Enum.UserInputType.Touch and touchPos then
			if Input.Position.X < cam.ViewportSize.X / 2 then
				touchPos = nil
				keysDown["Enum.KeyCode.W"] = false
				keysDown["Enum.KeyCode.A"] = false
				keysDown["Enum.KeyCode.S"] = false
				keysDown["Enum.KeyCode.D"] = false
			end
		end
	end)
	UIS.TouchMoved:Connect(function(input)
		if touchPos then
			if input.Position.X < cam.ViewportSize.X / 2 then
				if input.Position.Y < touchPos.Y then
					keysDown["Enum.KeyCode.W"] = true
					keysDown["Enum.KeyCode.S"] = false
				else
					keysDown["Enum.KeyCode.W"] = false
					keysDown["Enum.KeyCode.S"] = true
				end
				if input.Position.X < (touchPos.X - 15) then
					keysDown["Enum.KeyCode.A"] = true
					keysDown["Enum.KeyCode.D"] = false
				elseif input.Position.X > (touchPos.X + 15) then
					keysDown["Enum.KeyCode.A"] = false
					keysDown["Enum.KeyCode.D"] = true
				else
					keysDown["Enum.KeyCode.A"] = false
					keysDown["Enum.KeyCode.D"] = false
				end
			end
		end
	end)
end

local ReplicatedStorage = game:GetService("ReplicatedStorage")
local SoundService = game:GetService("SoundService")

local QuestsGui = plr:WaitForChild("PlayerGui"):WaitForChild("Quests")
local QuestInfo = QuestsGui:WaitForChild("QuestInfo")
local PlayerButtons = plr:WaitForChild("PlayerGui"):WaitForChild("Main"):WaitForChild("PlayerButtons").Grid.Quests

local completeEvent = ReplicatedStorage:WaitForChild("Quests"):WaitForChild("RequestQuestComplete")
local scrollingFrame = QuestsGui.Window.Grid.ScrollingFrame

local function completeQuest(questCard)
	if questCard:FindFirstChild("CurrentQuantity") and questCard:FindFirstChild("TargetQuantity") then
		if questCard.CurrentQuantity.Value >= questCard.TargetQuantity.Value then
			local questName = questCard.Name
			completeEvent:FireServer(questName)
			local card = scrollingFrame:FindFirstChild(questName)
			if card then
				card:Destroy()
			end
			local showNoQuests = #scrollingFrame:GetChildren() <= 1
			QuestsGui.Window.NoQuests.Visible = showNoQuests
			PlayerButtons.Button.Notification.Visible = false
			SoundService.Interface.OpenQuests:Play()
		end
	end
end

local function deactivateFreecam()
   local plr = game.Players.LocalPlayer
   local hum = plr.Character.HumanoidRootPart
	freecamEnabled = false
	cam.CameraType = Enum.CameraType.Custom
	UIS.MouseBehavior = Enum.MouseBehavior.Default
	RS:UnbindFromRenderStep("FreecamRender")
end

local Main = Window:CreateTab("Main", 125058207637011)
Main:CreateSection("Main")

AllSave.Essences = Main:CreateLabel("Essences: " ..plr.PlayerGui.Main.Essences.TextLabel.Text, 14376169362)
Main:CreateLabel("Server: "..game.JobId, 9692125126)

AllSave.AntiAFKBypassT = Main:CreateToggle({Name = "Anti AFK Bypass", CurrentValue = false, Flag = "AntiAFKBypassT", Callback = function(Value)
    local vu = game:GetService("VirtualUser")
    if Value then
    	RunAntiAfk = plr.Idled:connect(function()
    		vu:Button2Down(Vector2.new(0,0),workspace.CurrentCamera.CFrame)
    		wait(1)
    		vu:Button2Up(Vector2.new(0,0),workspace.CurrentCamera.CFrame)
    	end)
    else
        if RunAntiAfk then
            RunAntiAfk:Disconnect()
            RunAntiAfk = nil
        end
    end
end})

Main:CreateInput({Name = "Server", CurrentValue = "", PlaceholderText = "ServerId", RemoveTextAfterFocusLost = true, Callback = function(Value)
    TeleportService:TeleportToPlaceInstance(game.PlaceId, Value, plr)
end})

Main:CreateButton({Name = "Rejoin", Callback = function()
    TeleportService:TeleportToPlaceInstance(game.PlaceId, game.JobId, plr)
end})

Main:CreateButton({Name = "Server Hop", Callback = function()
    local servers = {}
    local req = game:HttpGet("https://games.roblox.com/v1/games/" .. game.PlaceId .. "/servers/Public?sortOrder=Desc&limit=100&excludeFullGames=true")
    local body = HttpService:JSONDecode(req)

    if body and body.data then
        for i, v in next, body.data do
            if type(v) == "table" and tonumber(v.playing) and tonumber(v.maxPlayers) and v.playing < v.maxPlayers and v.id ~= game.JobId then
                table.insert(servers, 1, v.id)
            end
        end
    end

    if #servers > 0 then
        TeleportService:TeleportToPlaceInstance(game.PlaceId, servers[math.random(1, #servers)], plr)
    end
end})

local Farm = Window:CreateTab("Farm", 13060262529)
Farm:CreateSection("Farm")

AllSave.TotalRoll = Farm:CreateLabel("Total Roll: " ..plr.leaderstats.Rolls.Value, 12442713148)
AllSave.RollCount = Farm:CreateLabel("Roll Count: " ..plr.Variables.RollCount.Value.."/10", 12442713148)

AllSave.AutoRollT = Farm:CreateToggle({Name = "Auto Roll", CurrentValue = false, Flag = "AutoRollT", Callback = function(Value)
    AutoRoll = Value
end})

Farm:CreateButton({Name = "Equip The Best Mount", Callback = function()
    local TopRarity = 0
    local Name = ""
    for i, v in pairs(plr.PlayerGui.Inventory.Window.Grid.CanvasGroup.MountsFrame:GetChildren()) do
        if v:IsA("Frame") and tonumber(v.Rarity.Value) > TopRarity then
            TopRarity = tonumber(v.Rarity.Value)
            Name = v.Name
        end
    end
    if Name ~= "" then
        local args = {
        	Name
        }
        game:GetService("ReplicatedStorage"):WaitForChild("Remotes"):WaitForChild("SpawnMount"):InvokeServer(unpack(args))
    end
end})

AllSave.TierListDrop = Farm:CreateDropdown({Name = "Tier List", Options = {"Common", "Uncommon", "Rare", "Epic", "Legendary", "Mythic", "Exotic"}, CurrentOption = {"Common"}, MultipleOptions = true, Flag = "TierListDrop", Callback = function(Value)
    SelectTier = Value
end})

AllSave.MountSellRarity = Farm:CreateInput({Name = "Sell If Rarity Is Lower Than 1 in ", CurrentValue = "1", PlaceholderText = "Number", RemoveTextAfterFocusLost = true, Flag = "MountSellRarity", Callback = function(Value)
    if tonumber(Value) then
        RarityNum = tonumber(Value)
        AllSave.MountSellRarity:Set(RarityNum)
    else
        AllSave.MountSellRarity:Set(RarityNum)
        Rayfield:Notify({
            Title = "⚠️ Warn!",
            Content = "Please Put Number",
            Duration = 3.5,
            Image = 11745872910,
        })
    end
end})

AllSave.KeepAmount = Farm:CreateInput({Name = "Keep Amount", CurrentValue = "1", PlaceholderText = "Number", RemoveTextAfterFocusLost = true, Flag = "KeepAmount", Callback = function(Value)
    if tonumber(Value) then
        KeepAmount = tonumber(Value)
        AllSave.KeepAmount:Set(KeepAmount)
    else
        AllSave.KeepAmount:Set(KeepAmount)
        Rayfield:Notify({
            Title = "⚠️ Warn!",
            Content = "Please Put Number",
            Duration = 3.5,
            Image = 11745872910,
        })
    end
end})

AllSave.AutoSellMountT = Farm:CreateToggle({Name = "Auto Sell Mount", CurrentValue = false, Flag = "AutoSellMountT", Callback = function(Value)
    AutoSellMount = Value
end})

AllSave.AutoCollectLootT = Farm:CreateToggle({Name = "Auto Collect Loot", CurrentValue = false, Flag = "AutoCollectLootT", Callback = function(Value)
    AutoCollectLoot = Value
end})

AllSave.HideSkillT = Farm:CreateToggle({Name = "Hide Skill", CurrentValue = false, Flag = "HideSkillT", Callback = function(Value)
    HideSkill = Value
end})

AllSave.DisableCameraShakeT = Farm:CreateToggle({Name = "Disable Camera Shake", CurrentValue = false, Flag = "DisableCameraShakeT", Callback = function(Value)
    plr.PlayerScripts.CameraShakeClient.Disabled = Value
end})

AllSave.FreeCamT = Farm:CreateToggle({Name = "Free Cam", CurrentValue = false, Flag = "FreeCamT", Callback = function(Value)
    freecamEnabled = Value
    if Value then
        activateFreecam()
    else
        deactivateFreecam()
    end
end})

AllSave.AutoGetQuestT = Farm:CreateToggle({Name = "Auto Get Quest", CurrentValue = false, Flag = "AutoGetQuestT", Callback = function(Value)
    AutoGetQuest = Value
end})

AllSave.AutoGetQuestRewardT = Farm:CreateToggle({Name = "Auto Get Quest Reward", CurrentValue = false, Flag = "AutoGetQuestRewardT", Callback = function(Value)
    AutoGetQuestReward = Value
end})

AllSave.MobListDrop = Farm:CreateDropdown({Name = "Mob List", Options = Mobs, CurrentOption = {"Common"}, MultipleOptions = true, Flag = "MobListDrop", Callback = function(Value)
    SelectMob = Value
end})

AllSave.SelectAllMobT = Farm:CreateToggle({Name = "Select All Mob", CurrentValue = false, Flag = "SelectAllMobT", Callback = function(Value)
    SelectAllMob = Value
end})

AllSave.TweenSpeed = Farm:CreateSlider({Name = "Tween Speed", Range = {100, 800}, Increment = 1, Suffix = "Speed", CurrentValue = 400, Flag = "TweenSpeed", Callback = function(Value)
    TweenSpeed = Value
end})

AllSave.AutoFarmT = Farm:CreateToggle({Name = "Auto Farm", CurrentValue = false, Flag = "AutoFarmT", Callback = function(Value)
    AutoFarm = Value
    if AutoFarm then
        game:GetService("ReplicatedStorage"):WaitForChild("Remotes"):WaitForChild("SpawnMount"):InvokeServer("")
    end
end})

AllSave.AutoAttackT = Farm:CreateToggle({Name = "Auto Attack", CurrentValue = false, Flag = "AutoAttackT", Callback = function(Value)
    AutoAttack = Value
end})

local Shop = Window:CreateTab("Shop", 10893267086)
Shop:CreateSection("Shop")

Shop:CreateLabel("Shop", 11413045091)

AllSave.ShopDrop = Shop:CreateDropdown({Name = "Item List", Options = ShopList, CurrentOption = {"None"}, MultipleOptions = true, Flag = "ShopDrop", Callback = function(Value)
    SelectItem = Value
end})

AllSave.BuyAllItemT = Shop:CreateToggle({Name = "Buy All", CurrentValue = false, Flag = "BuyAllItemT", Callback = function(Value)
    BuyAllItem = Value
end})

AllSave.BuyAmountPerItem = Shop:CreateInput({Name = "Buy Amount Per Item", CurrentValue = "1", PlaceholderText = "Number", RemoveTextAfterFocusLost = true, Flag = "BuyAmountPerItem", Callback = function(Value)
    if tonumber(Value) then
        BuyAmountPerItemNum = tonumber(Value)
        AllSave.BuyAmountPerItem:Set(BuyAmountPerItemNum)
    else
        AllSave.BuyAmountPerItem:Set(BuyAmountPerItemNum)
        Rayfield:Notify({
            Title = "⚠️ Warn!",
            Content = "Please Put Number",
            Duration = 3.5,
            Image = 11745872910,
        })
    end
end})

Shop:CreateButton({Name = "Buy", Callback = function()
    for i, v in pairs(ShopItem) do
        if BuyAllItem then
            if tonumber(v[2].Frame.Button.EssenceQuantity.Text) <= NumberCoverter(plr.PlayerGui.Main.Essences.TextLabel.Text) then
                if NumberCoverter(plr.PlayerGui.Main.Essences.TextLabel.Text) > (tonumber(v[2].Frame.Button.EssenceQuantity.Text) * BuyAmountPerItemNum) then
                    local args = {
                    	v[1],
                    	BuyAmountPerItemNum
                    }
                    game:GetService("ReplicatedStorage"):WaitForChild("Remotes"):WaitForChild("MultiplePurchaseItem"):InvokeServer(unpack(args))
                else
                    local BestAmount = math.floor(NumberCoverter(plr.PlayerGui.Main.Essences.TextLabel.Text) / tonumber(v[2].Frame.Button.EssenceQuantity.Text))
                    local args = {
                    	v[1],
                    	BestAmount
                    }
                    game:GetService("ReplicatedStorage"):WaitForChild("Remotes"):WaitForChild("MultiplePurchaseItem"):InvokeServer(unpack(args))
                end
            end
        else
            if table.find(SelectItem, v[2].Frame.Button.ItemName.Text) and tonumber(v[2].Frame.Button.EssenceQuantity.Text) <= NumberCoverter(plr.PlayerGui.Main.Essences.TextLabel.Text) then
                if NumberCoverter(plr.PlayerGui.Main.Essences.TextLabel.Text) > (tonumber(v[2].Frame.Button.EssenceQuantity.Text) * BuyAmountPerItemNum) then
                    local args = {
                    	v[1],
                    	BuyAmountPerItemNum
                    }
                    game:GetService("ReplicatedStorage"):WaitForChild("Remotes"):WaitForChild("MultiplePurchaseItem"):InvokeServer(unpack(args))
                else
                    local BestAmount = math.floor(NumberCoverter(plr.PlayerGui.Main.Essences.TextLabel.Text) / tonumber(v[2].Frame.Button.EssenceQuantity.Text))
                    local args = {
                    	v[1],
                    	BestAmount
                    }
                    game:GetService("ReplicatedStorage"):WaitForChild("Remotes"):WaitForChild("MultiplePurchaseItem"):InvokeServer(unpack(args))
                end
            end
        end
    end
end})

local IsDoneSellOne = true
local MobTarget = nil
local traveled = 0

Run = RunService.RenderStepped:Connect(function(dt)
    if not Rayfield:GetGui() then
        task.spawn(function()
            local plr = game.Players.LocalPlayer
            local char = plr.Character
            local hrp = char and char:FindFirstChild("HumanoidRootPart")
            AllSave.Essences:Set("Essences: " ..plr.PlayerGui.Main.Essences.TextLabel.Text)
            AllSave.TotalRoll:Set("Total Roll: " ..plr.leaderstats.Rolls.Value)
            AllSave.RollCount:Set("Roll Count: " ..plr.Variables.RollCount.Value.."/10")
            if AutoSellMount and IsDoneSellOne then
                IsDoneSellOne = false
                for i, v in pairs(plr.PlayerGui.Inventory.Window.Grid.CanvasGroup.MountsFrame:GetChildren()) do
                    if v:IsA("Frame") then
                        if KeepAmount and tonumber(v.Button.Quantity.Text) > KeepAmount then
                            if RarityNum and tonumber(v.Rarity.Value) < RarityNum then
                                if SelectTier and table.find(SelectTier, UtilsModule.getRarityNameWithColor(v.Button.CardImage.ImageColor3)) then
                                    task.spawn(function()
                                        local args = {
                                            v.Name,
                                        	tonumber(v.Button.Quantity.Text) - KeepAmount
                                        }
                                        game:GetService("ReplicatedStorage"):WaitForChild("Remotes"):WaitForChild("DisenchantFunction"):InvokeServer(unpack(args))
                                    end)
                                end
                            end
                        end
                    end
                end
                task.wait(0.2)
                IsDoneSellOne = true
            end
            if AutoCollectLoot then
                for i, v in pairs(workspace:GetChildren()) do
                    if v:IsA("Model") and v.Name == "Loot" and v: FindFirstChild("CollectLoot") then
                        v.CollectLoot:FireServer()
                        v:Destroy()
                    end
                end
            end
            if HideSkill then
                for i, v in pairs(workspace:GetChildren()) do
                    if (v:IsA("Model") and (v.Name == "Skill" or v.Name == "Rain" or v.Name == "JudmentArrow")) or (v:IsA("Part") and (v.Name == "Lightning" or v.Name == "Projectile")) then
                        v:Destroy()
                    end
                end
            end
    
            if hrp and (MobTarget == nil or not MobTarget:FindFirstChild("HumanoidRootPart")) and MobTarget:IsA("Model") then
                local nearestMob = nil
                local shortestDistance = math.huge
            
                for _, v in ipairs(workspace.Mobs:GetChildren()) do
                    if v:IsA("Model") and v:FindFirstChild("HumanoidRootPart") then
                        if SelectAllMob or table.find(SelectMob, v.Name) then
                            local distance = (v.HumanoidRootPart.Position - hrp.Position).Magnitude
            
                            if distance < shortestDistance then
                                shortestDistance = distance
                                nearestMob = v
                            end
                        end
                    end
                end
            
                if nearestMob then
                    MobTarget = nearestMob
                    traveled = 0
                else
                    MobTarget = workspace.Environment["Paradise Island"].Blocks:GetChildren()[1]
                end
            end
            if AutoGetQuestReward then
                for _, quest in ipairs(scrollingFrame:GetChildren()) do
                	if quest:IsA("Frame") then
                		completeQuest(quest)
                	end
                end
            end
        end)
    else
        if ST then
            ST:Destroy()
        end
        if Run then
            Run:Disconnect()
            Run = nil
        end
    end
end)
local RunService = game:GetService("RunService")

local Run2
local startPos
local targetPos
local direction
local distance

Run2 = RunService.Heartbeat:Connect(function(dt)
    if IsGettingQuest and AutoGetQuest then return end
    if Rayfield:GetGui() then
        if Run2 then
            Run2:Disconnect()
            Run2 = nil
        end
        return
    end

    if not AutoFarm then return end
    if not MobTarget then return end
    if not MobTarget:FindFirstChild("HumanoidRootPart") then return end

    local char = plr.Character
    local hrp = char and char:FindFirstChild("HumanoidRootPart")
    if not hrp then return end
    
    local mobPos
    
    if MobTarget:IsA("Model") then
        mobPos = MobTarget.HumanoidRootPart.Position
    else
        mobPos = MobTarget.Position
    end

    if not targetPos or (mobPos - targetPos).Magnitude > 3 then
        startPos = hrp.Position
        targetPos = mobPos
        direction = (targetPos - startPos)
        distance = direction.Magnitude
        direction = direction.Unit
        traveled = 0
    end

    local step = TweenSpeed * dt
    traveled += step

    if traveled >= distance then
        hrp.CFrame = CFrame.new(targetPos)
        return
    end

    hrp.CFrame = CFrame.new(startPos + direction * traveled)
end)

task.spawn(function()
	while not Rayfield:GetGui() do
		task.wait(0.1)
		if AutoRoll then
        	task.spawn(function()
        		game:GetService("ReplicatedStorage"):WaitForChild("Remotes"):WaitForChild("RollFunction"):InvokeServer(false)
        	end)
        end
        if AutoAttack then
            for i, v in pairs(game:GetService("ReplicatedStorage").Combat.Skills:GetChildren()) do
                task.spawn(function()
                    game:GetService("ReplicatedStorage"):WaitForChild("Combat"):WaitForChild("RequestSkillUse"):FireServer(v.Name)
                end)
            end
        end
        if AutoGetQuest then
            local Num = 0
            for i, v in pairs(plr.PlayerGui.Quests.Window.Grid.ScrollingFrame:GetChildren()) do
                if v:IsA("Frame") then
                    Num = Num + 1
                end
            end
            if Num < 8 then
                IsGettingQuest = true
            else
                IsGettingQuest = false
            end 
            if IsGettingQuest then
                for i, v in pairs(workspace.Environment.Interactables.Quests:GetChildren()) do
                    if v:IsA("Part") and v:FindFirstChild("ProximityPrompt") then
                        local prompt = v:FindFirstChild("ProximityPrompt")
                        local PartCFrame = plr.Character.HumanoidRootPart.CFrame
                        plr.Character:WaitForChild("HumanoidRootPart").CFrame = v.CFrame
                        prompt.HoldDuration = 0
                        task.wait(0.1)
                        prompt:InputHoldBegin(plr)
                        task.wait()
                        prompt:InputHoldEnd(plr)
                        task.wait(0.1)
                        prompt:InputHoldBegin(plr)
                        task.wait()
                        prompt:InputHoldEnd(plr)
                        task.wait()
                        plr.Character.HumanoidRootPart.CFrame = PartCFrame
                    end
                end
            end
        end
	end
end)

Rayfield:LoadConfiguration()
